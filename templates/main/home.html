{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ú–∞–≥–∞–∑–∏–Ω –º—è–≥–∫–∏—Ö –∏–≥—Ä—É—à–µ–∫</title>
    <link rel="stylesheet" href="{% static 'style.css' %}">
</head>
<body>
<header>
    <h1>–ú–∞–≥–∞–∑–∏–Ω –º—è–≥–∫–∏—Ö –∏–≥—Ä—É—à–µ–∫</h1>
    <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{ user.username }}!</h2>

    <form method="get" action="{% url 'home' %}" style="display: inline-block; margin-left: 20px;">
        <input type="text" name="q" placeholder="–ü–æ–∏—Å–∫ –∏–≥—Ä—É—à–µ–∫..." value="{{ query|default:'' }}">
        <button type="submit">üîç</button>
    </form>

    <a href="{% url 'cart' %}" style="float: right; margin-right: 20px;">üõí –ö–æ—Ä–∑–∏–Ω–∞</a>
    <a href="{% url 'contact' %}" style="float: right; margin-right: 20px;">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
    <a href="{% url 'about' %}" style="float: right; margin-right: 20px;">–û –Ω–∞—Å</a>
</header>

<main style="display: flex; justify-content: space-between; align-items: flex-start; gap: 20px;">
    {% block content %}{% endblock %}

    <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å ‚Äî —Ç–æ–≤–∞—Ä—ã -->
    <div class="toy-list" style="width: 70%;">
        {% if toys %}
            {% for toy in toys %}
            <div class="toy-card">
                <img src="{{ toy.image.url }}" alt="{{ toy.name }}">
                <h2>{{ toy.name }}</h2>
                <p>{{ toy.description }}</p>
                <p><strong>{{ toy.price }} ‚Ç∏</strong></p>

                {% if toy.tags.all %}
                    <p>
                        <strong>–¢–µ–≥–∏:</strong>
                        {% for tag in toy.tags.all %}
                            <span class="tag">#{{ tag.name }}</span>
                        {% endfor %}
                    </p>
                {% endif %}

                <button>–ö—É–ø–∏—Ç—å</button>
            </div>
            {% endfor %}
        {% else %}
            <p style="text-align:center; font-size:18px; margin-top:20px;">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ üòï</p>
        {% endif %}
    </div>

    <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å ‚Äî –Ω–æ–≤–æ—Å—Ç–∏ -->
    <aside class="news-section" style="width: 25%; background: #f8f8f8; padding: 15px; border-radius: 10px;">
        <h3 style="text-align:center;">üì∞ –ù–æ–≤–æ—Å—Ç–∏</h3>
        {% for news in news_list %}
            <div class="news-item" style="margin-bottom: 15px; border-bottom: 1px solid #ddd; padding-bottom: 10px;">
                <h4 style="margin: 0;">{{ news.title }}</h4>
                <p style="font-size: 14px;">{{ news.content|truncatewords:20 }}</p>
                <small style="color: gray;">{{ news.created_at|date:"d.m.Y" }}</small>
            </div>
        {% empty %}
            <p>–ü–æ–∫–∞ –Ω–µ—Ç –Ω–æ–≤–æ—Å—Ç–µ–π.</p>
        {% endfor %}
    </aside>
</main>

<footer>
    <a href="{% url 'logout' %}" style="display:block;text-align:center;margin-top:20px;">–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</a>
    <p>¬© 2025 –ú–æ–π –º–∞–≥–∞–∑–∏–Ω –∏–≥—Ä—É—à–µ–∫</p>
</footer>
</body>
</html>
